{% extends 'base.html' %}

{% block title %}Detalhe do Cliente - Admin | Maria Raisa{% endblock %}

{% block content %}
<section style="max-width:900px; margin:38px auto 0; background:#fff; border-radius:18px; box-shadow:0 4px 28px rgba(60,60,60,0.09); padding:32px 16px;">
  <h1 style="font-family:'Montserrat',sans-serif; font-size:1.7rem; font-weight:900; color:#111; margin-bottom:16px; text-align:center;">
    Cliente: {{ cliente.nome }}
  </h1>

  <div style="margin-bottom:26px;">
    <strong>ID:</strong> {{ cliente.id }}<br>
    <strong>Nome:</strong> {{ cliente.nome }}<br>
    <strong>Email:</strong> {{ cliente.email }}<br>
    <strong>CPF/CNPJ:</strong> {{ cliente.cpf_cnpj }}<br>
    <strong>Telefone:</strong> {{ cliente.telefone }}<br>
    <strong>Endereço:</strong> {{ cliente.endereco }}, {{ cliente.cidade }} - {{ cliente.estado }}<br>
    <strong>CEP:</strong> {{ cliente.cep }}<br>
  </div>

  <h2 style="font-size:1.19rem; font-weight:800; margin:20px 0 11px; color:#2a2a2a;">Pedidos do Cliente</h2>

  {% if cliente.pedidos %}
    <table style="width:100%; border-collapse:collapse; font-size:1.04rem;">
      <thead>
        <tr style="background:#fafafa;">
          <th style="padding:11px 7px; text-align:left; color:#222;">Pedido</th>
          <th style="padding:11px 7px; text-align:left; color:#222;">Data</th>
          <th style="padding:11px 7px; text-align:left; color:#222;">Total</th>
          <th style="padding:11px 7px; text-align:left; color:#222;">Status</th>
          <th style="padding:11px 7px; text-align:left; color:#222;">Detalhes</th>
        </tr>
      </thead>
      <tbody>
        {% for pedido in cliente.pedidos %}
          {# define cor de status #}
          {% set cores = {
  'Pago': '#28a745',
  'Aguardando pagamento': '#c0392b',
  'Em produção': '#f7b731',
  'Pronto para envio': '#111',
  'Enviado': '#3fa996',
  'Cancelado': '#a31a1a'
} %}
{% set cor_status = cores.get(pedido.status, '#333') %}
          <tr style="border-bottom:1.5px solid #eee;">
            <td style="padding:10px 6px; font-weight:600;">#{{ pedido.id }}</td>
            <td style="padding:10px 6px;">{{ pedido.data.strftime('%d/%m/%Y') }}</td>
            <td style="padding:10px 6px;">R$ {{ '%.2f'|format(pedido.total) }}</td>
            <td style="padding:10px 6px;">
              <span style="font-weight:700; color:{{ cor_status }};">
                {{ pedido.status }}
              </span>
            </td>
            <td style="padding:10px 6px;">
              <a href="{{ url_for('routes.admin_pedido_detalhe', pedido_id=pedido.id) }}" class="btn btn-sm">
                Ver Detalhe
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div style="color:#888; font-size:1.08rem; margin-top:13px;">
      Nenhum pedido realizado por este cliente.
    </div>
  {% endif %}
</section>
{% endblock %}
